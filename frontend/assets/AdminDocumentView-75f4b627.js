import{r as n,a as z,h as G,u as K,j as e,d as w}from"./index-b349b8ac.js";import{B as Q}from"./Breadcrumb-9b91b131.js";import{P as X}from"./pdf-svgrepo-com-f76b7ac2.js";import{R as Y,S as Z}from"./DocApproveModel-cc6b3596.js";const j=w.baseApiUrl,ee=()=>{var S,k,F;const[C,$]=n.useState([]),f=z(),m=localStorage.getItem("usertoken");f.state;const[U,y]=n.useState(!1),[te,I]=n.useState(null),[E,P]=n.useState(null),[O,b]=n.useState(!1),[d,N]=n.useState(!1),[o,R]=n.useState(""),[se,_]=n.useState(!1),[ne,h]=n.useState(null),[B,v]=n.useState(""),{uid:L}=G();let M=K();n.useEffect(()=>{(async()=>{var u,l,A;const s=new URLSearchParams(f.search),i=s.get("uid")??"",a=s.get("lid")??"";s.has("lid")?v("/OnboardingAdmin/AdminSellerListing"):v("/OnboardingAdmin/DocumentVerification");let c=atob(a),x=atob(i);if(x)try{const r=await fetch(`${j}getUserDocImages`,{method:"post",headers:{"Content-type":"application/json"},body:JSON.stringify({user_id:x,listingId:c,token:m})});if(r.ok){const g=await r.json(),H=(((l=(u=g.data.data)==null?void 0:u[0])==null?void 0:l.allDoc)||"").split(",").filter(Boolean);N(g),$(H),R(((A=g.data.data)==null?void 0:A[0])||"")}else console.error("Error in fetch request:",r.status,r.statusText),h("No Data Found")}catch(r){console.error("Error while sending report:",r)}else console.log("No Uid found")})()},[L,f.search]);const D=t=>{const s=`${w.baseApiUrl}${t}`,i=t.toLowerCase().endsWith(".pdf"),a=800,c=600,x=window.innerWidth/2-a/2+window.screenLeft,u=window.innerHeight/2-c/2+window.screenTop,l=`width=${a},height=${c},top=${u},left=${x},resizable=yes`;window.open(s,"_blank",l)},V=t=>{P(t),y(!0)},W=()=>{b(!1),window.location.reload(!1)},q=t=>{t.preventDefault(),y(!1),_(!0),I(null),window.location.reload(!1)};n.useEffect(()=>{if(o.user_id!==""){async function t({user_id:s,listingId:i}){if(s!==""&&i!=="")try{const a=await fetch(`${j}getUserDocImages`,{method:"post",headers:{"Content-type":"application/json"},body:JSON.stringify({user_id:s,listingId:i,token:m})});if(a.ok){const c=await a.json();N(c)}else console.error("Error in fetch request:",a.status,a.statusText),h("No Data Found")}catch(a){console.error("Error while sending report:",a)}}t({user_id:o.user_id,listingId:o.listing_id})}else console.log("No User Id")},[o.user_id]);const J=async t=>{try{(await fetch(`${j}updateDocgStatus`,{method:"post",headers:{"Content-type":"application/json"},body:JSON.stringify({id:t,token:m,status:"1"})})).ok?b(!0):h("No Data Found")}catch(s){console.log("error while sending report ",s)}};o==null||o.status;const p=(F=(k=(S=d==null?void 0:d.data)==null?void 0:S.data)==null?void 0:k[0])==null?void 0:F.status;function T(t){t.preventDefault(),M(B)}return e.jsxs("div",{className:"rounded-sm py-10 p-10 text-center bg-white center",children:[e.jsxs("div",{className:"bg-white",children:[U&&e.jsx(Y,{onClose:q,data:E}),O&&e.jsx(Z,{onClose:W})]}),e.jsx("div",{className:"flex flex-wrap -mx-2",children:C.map((t,s)=>e.jsx("div",{className:"w-1/4 p-2",children:t.toLowerCase().endsWith(".pdf")?e.jsx("img",{src:X,alt:`PDF Icon ${s}`,className:"cursor-pointer hover:opacity-75",style:{width:"200px",height:"200px"},onClick:()=>D(t)}):e.jsx("img",{src:`${w.baseApiUrl}${t}`,alt:`File ${s}`,className:"cursor-pointer hover:opacity-75",style:{width:"200px",height:"200px"},onClick:()=>D(t)})},s))}),d?e.jsx(e.Fragment,{children:p&&e.jsx(e.Fragment,{children:p=="2"?e.jsx("div",{className:"flex items-center pt-10 pl-[45%]",children:e.jsxs("div",{className:"flex items-center gap-[6px]",children:[e.jsx("button",{onClick:()=>J(o.user_id),className:"inline-flex items-center justify-center rounded-md bg-[#2174F5] py-[8px] px-[20px] text-center font-[400] text-[#EFF4FB] text-[16px] hover:bg-opacity-90 leading-[23px]",children:"Accept"}),e.jsx("button",{onClick:()=>V(o.user_id),className:"inline-flex items-center justify-center rounded-md bg-[red] py-[8px] px-[20px] text-center font-[400] text-[#EFF4FB] text-[16px] hover:bg-opacity-90 leading-[23px]",children:"Reject"})]})}):p=="1"?e.jsxs("div",{className:"flex items-center pt-10 pl-[45%]",children:[e.jsx("div",{className:"flex items-center gap-[6px]",children:e.jsx("p",{className:"inline-flex items-center justify-center rounded-md bg-[green] py-[8px] px-[20px] text-center font-[400] text-[white] text-[16px] hover:bg-opacity-90 leading-[23px]",children:"Approved"})}),e.jsx("div",{onClick:T,className:"flex items-center gap-[6px] px-5",children:e.jsx("a",{href:"#",className:"inline-flex items-center justify-center rounded-md bg-black py-[8px] px-[20px] text-center font-[400] text-[white] text-[16px] hover:bg-opacity-90 leading-[23px]",children:"Back"})})]}):p=="3"?e.jsxs("div",{className:"flex items-center pt-10 pl-[45%]",children:[e.jsx("div",{className:"flex items-center gap-[6px]",children:e.jsx("p",{className:"inline-flex items-center justify-center rounded-md bg-[#ff2e2e] py-[8px] px-[20px] text-center font-[400] text-[white] text-[16px] hover:bg-opacity-90 leading-[23px]",children:"Rejected"})}),e.jsx("div",{className:"flex items-center gap-[6px] px-5",children:e.jsx("a",{href:"/OnboardingAdmin/AdminSellerListing",className:"inline-flex items-center justify-center rounded-md bg-black py-[8px] px-[20px] text-center font-[400] text-[white] text-[16px] hover:bg-opacity-90 leading-[23px]",children:"Back"})})]}):e.jsx("p",{children:"Not Found"})})}):e.jsx("p",{children:"Documents Not Found"})]})},le=()=>e.jsxs(e.Fragment,{children:[e.jsx(Q,{pageName:"Documents View"}),e.jsx(ee,{})]});export{le as default};
