import{r as s,j as e,d as R,a as Q,h as X,u as Y}from"./index-b349b8ac.js";import{_ as ee}from"./react-stars-4e5fb6d8.js";import{B as te}from"./Breadcrumb-9b91b131.js";const se=R.baseApiUrl,ae=({onClose:p,data:w})=>{const[y,u]=s.useState({}),[c,h]=s.useState({reason:"",listingId:w}),_=localStorage.getItem("usertoken"),[m,M]=s.useState(null),D=i=>{const{name:d,value:B}=i.target;h(S=>({...S,[d]:B}))},k=async i=>{if(i.preventDefault(),C())try{(await fetch(`${se}updateListingStatus`,{method:"post",headers:{"Content-type":"application/json"},body:JSON.stringify({...c,token:_,status:"3"})})).ok&&M("Listing request rejected sucessfully")}catch(d){console.log("error while sending report ",d)}},C=()=>{const i={};return c.reason||(i.reason="â€¢ Reason is required"),u(i),Object.keys(i).length===0};return e.jsx("div",{className:"fixed z-[1] inset-0 flex items-center justify-center bg-black bg-opacity-50 overflow-auto",children:e.jsx("div",{className:"max-w-[80%] max-h-[80%] bg-opacity-50 p-8 rounded-md",children:e.jsxs("form",{onSubmit:k,className:"relative flex flex-col gap-4 p-10 rounded-md bg-white ",id:"createListing",children:[e.jsx("div",{className:"absolute top-7 right-7 text-right",children:e.jsx("button",{onClick:p,className:"relative top-0 right-0 cursor-pointer text-gray-500 hover:text-black",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",className:"h-6 w-6",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})}),e.jsxs("div",{className:"rounded-sm bg-white dark:border-strokedark dark:bg-boxdark",children:[e.jsx("div",{className:"border-b border-stroke py-4 px-6.5 dark:border-strokedark",children:e.jsx("h2",{className:"font-medium text-black dark:text-white",children:"Rejection Reason"})}),e.jsx("div",{className:"flex flex-col gap-5.5 p-6.5",children:e.jsx("div",{className:"flex",children:e.jsxs("div",{className:"w-full max-w-[100%]",children:[e.jsx("label",{className:"mb-3 block text-black dark:text-white",children:"Rejection Reason"}),e.jsx("textarea",{name:"reason",value:c.reason,onChange:D,placeholder:"Enter the title",className:"w-full w-[auto] resize-none p-4 border-2 border p2 border-gray-300 rounded-md bg-gray-100 text-gray-800 focus:outline-none focus:border-primary transition duration-300 ease-in-out dark:bg-gray-700 dark:border-gray-600 dark:text-white"})]})})})]}),e.jsx("button",{type:"submit",onClick:k,className:"bg-[#2174F5] py-2 px-5 text-white rounded-md hover:bg-opacity-90",children:"Submit"}),e.jsx("span",{className:"text-[red] text-[16px]",children:y.reason&&e.jsx("p",{children:y.reason})}),m&&e.jsx("span",{className:"bg-[green] text-center mt-[9px] max-w-[1000px] w-full rounded-lg text-white py-[15px]",children:m&&e.jsx("p",{children:m})})]})})})},ne=({onClose:p})=>e.jsx("div",{className:"fixed top-0 left-0 right-0 bottom-0 flex items-center justify-center bg-black bg-opacity-50 z-50",children:e.jsxs("div",{className:"text-[#FFF] w-full max-w-[536px] bg-[#fff] px-[55px] py-[38px] relative",children:[e.jsx("button",{className:"absolute top-4 color-[#94a3b8] right-4 cursor-pointer text-[#94a3b8] hover:text-gray-700",onClick:p,children:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),e.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})}),e.jsx("div",{className:"text-center mb-[24px]",children:e.jsx("img",{src:"/assets/accepted-img.svg",alt:"",className:"m-auto"})}),e.jsxs("h2",{className:"text-center text-[#1C2434] text-[26px] font-[600] leading-[normal]",children:["Listing has been ",e.jsx("br",{})," successfully Accepted"]})]})}),b=R.baseApiUrl,re=10,le=()=>{const p=Q(),{status:w}=X(),y=Y(),u=localStorage.getItem("usertoken"),[c,h]=s.useState([]),[_,m]=s.useState(!0),[M,D]=s.useState(!1),[k,C]=s.useState(""),[i,d]=s.useState(!1);s.useState(!1);const[B,S]=s.useState(null),[g,v]=s.useState("2"),[$,U]=s.useState(null),[O,I]=s.useState(!1);s.useState(!0);const[x,q]=s.useState(1),[F,ie]=s.useState(re),[P,z]=s.useState(1),[oe,T]=s.useState(!1),[E,N]=s.useState(null);s.useEffect(()=>{v("");const a=new URLSearchParams(p.search).get("status");a=="4"?v(""):v(a)},[w,p.search]);const J=async(t,a)=>{const n=await V(t,a);if(n==="approve")try{(await fetch(`${b}updateListingStatus`,{method:"post",headers:{"Content-type":"application/json"},body:JSON.stringify({listingId:t,page:x,pageSize:F,token:u,status:"1"})})).ok?(I(!0),D(!0),A()):N("No Data Found")}catch(r){console.log("error while sending report ",r)}else alert(n==="disapprove"?"Documents Rejected":n==="pending"?"Please approve documents first":"Documents not found")};async function V(t,a){var n,r,f,j;try{const o=await fetch(`${b}getSellerDocImages`,{method:"post",headers:{"Content-type":"application/json"},body:JSON.stringify({listingId:t,seller_id:a,token:u})});if(o.ok){const l=await o.json();return l.data.data[0].allDoc==null?"notFound":((r=(n=l==null?void 0:l.data)==null?void 0:n.data[0])==null?void 0:r.status)=="1"?"approve":((j=(f=l==null?void 0:l.data)==null?void 0:f.data[0])==null?void 0:j.status)=="2"?"pending":"disapprove"}else console.error("Error in fetch request:",o.status,o.statusText),alert("No Documents Found")}catch(o){console.error("Error while sending report:",o)}}const Z=t=>{U(t),d(!0)},G=()=>{I(!1),window.location.reload(!1),A()},W=t=>{t.preventDefault(),d(!1),T(!0),S(null),window.location.reload(!1)},A=async()=>{try{const t=await fetch(`${b}getAllCreatedListing`,{method:"post",headers:{"Content-type":"application/json"},body:JSON.stringify({token:u,getStatus:g,page:x,pageSize:F})});if(t.ok){const a=await t.json();a.data.data.length==0?(N("No Data Found"),h([])):(N(""),h(a.data.data),z(a.data.totalPages))}else N("No Data Found"),h([])}catch(t){console.log("Error while getting listing data",t),C("Error while fetching data")}finally{m(!1)}};s.useEffect(()=>{A()},[x,F,g]);const L=t=>{t>=1&&t<=P&&q(t)};async function H(t,a){try{const n=await fetch(`${b}getSellerDocImages`,{method:"post",headers:{"Content-type":"application/json"},body:JSON.stringify({listingId:t,seller_id:a,token:u})});if(n.ok){const r=await n.json();if(!r.data||!r.data.data||r.data.data.length===0)alert("No Data Found");else{const f=r.data.data[0].user_id,j=r.data.data[0].listing_id;if(!f||!j)alert("Documents not found");else{let o,l;try{o=btoa(f),l=btoa(j)}catch(K){alert("Error decoding base64 strings"),console.error(K);return}y(`/OnboardingAdmin/DocumentViewer?uid=${o}&lid=${l}`)}}}else console.error("Error in fetch request:",n.status,n.statusText),alert("No Documents Found")}catch(n){console.error("Error while sending report:",n)}}return e.jsxs("div",{className:"bg-white",children:[i&&e.jsx(ae,{onClose:W,data:$}),O&&e.jsx(ne,{onClose:G}),e.jsxs("div",{className:"text-end pb-4 pr-4",children:[e.jsx("label",{htmlFor:"bidStatus",className:"text-gray-700",children:"Bids Status : "}),e.jsxs("select",{onChange:t=>v(t.target.value),id:"bidStatus",className:"appearance-none w-50 bg-white border border-gray-300 rounded-md py-2 px-3 leading-tight focus:outline-none focus:shadow-outline-blue focus:border-blue-300",children:[e.jsx("option",{value:"",children:"All"}),e.jsx("option",{value:"1",selected:g==="1",children:"Approved"}),e.jsx("option",{value:"2",selected:g==="2",children:"Pending"}),e.jsx("option",{value:"3",selected:g==="3",children:"Rejected"})]})]}),e.jsxs("div",{className:"bg-white border-b border-[#E0E0E0] overflow-auto",children:[e.jsxs("div",{className:"grid grid-cols-10 pt-[24px] pb-[18px] px-[56px] sm:grid-cols-10 overflow-auto md:min-w-auto min-w-[1150px] gap-x-8 ",children:[e.jsx("div",{className:"col-span-1 flex items-center leading-[18px] pr-[15px]",children:e.jsx("p",{className:"text-[#1D2D5C] text-[16px] font-[500] leading-[18px]",children:"Image"})}),e.jsx("div",{className:"col-span-1 flex items-center leading-[18px] pr-[15px]",children:e.jsx("p",{className:"text-[#1D2D5C] text-[16px] font-[500] leading-[18px]",children:"Title"})}),e.jsx("div",{className:"col-span-2  items-center flex leading-[18px]",children:e.jsx("p",{className:"text-[#1D2D5C] text-[16px] font-[500] leading-[18px]",children:"Description"})}),e.jsx("div",{className:"col-span-1 flex items-center leading-[18px] pr-[15px]",children:e.jsx("p",{className:"text-[#1D2D5C] text-[16px] font-[500] leading-[18px]",children:"Downloads"})}),e.jsx("div",{className:"col-span-1 flex items-center leading-[18px] pr-[15px]",children:e.jsx("p",{className:"text-[#1D2D5C] text-[16px] font-[500] leading-[18px] whitespace-nowrap",children:"Asking Price"})}),e.jsx("div",{className:"col-span-1 flex items-center leading-[18px] pr-[15px]",children:e.jsx("p",{className:"text-[#1D2D5C] text-[16px] font-[500] leading-[18px] whitespace-nowrap",children:"Created By"})}),e.jsx("div",{className:"col-span-1 flex items-center leading-[18px] pr-[15px]",children:e.jsx("p",{className:"text-[#1D2D5C] text-[16px] font-[500] leading-[18px]",children:"Status"})}),e.jsx("div",{className:"col-span-1 flex items-center leading-[18px] pr-[15px]",children:e.jsx("p",{className:"text-[#1D2D5C] text-[16px] font-[500] leading-[18px]",children:"Documents"})}),e.jsx("div",{className:"col-span-1 flex items-center leading-[18px]",children:e.jsx("p",{className:"text-[#1D2D5C] text-[16px] font-[500] leading-[28px]",children:"Action"})})]}),c.length>0&&c.map(t=>e.jsxs("div",{className:"grid grid-cols-10 border-t border-[#E0E0E0] pt-[10px] pb-[12px] px-[56px] sm:grid-cols-10   md:min-w-auto min-w-[1150px] gap-x-8",children:[e.jsx("div",{className:"col-span-1 flex items-center pr-[25px]",children:e.jsx("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center",children:e.jsx("div",{className:"flex-shrink-0",children:e.jsx("img",{src:`${b}${t.listing_thumbnail?t.listing_thumbnail:R.DEFAULT_IMG}`,alt:"Default",className:"h-[50px] w-[50px]"})})})}),e.jsxs("div",{className:"col-span-1 items-left flex flex-col gap-[10px] pr-[25px]",children:[e.jsx("p",{className:"text-[#1D2D5C] text-[16px] font-[500] leading-[126%]",children:t.title}),e.jsxs("span",{className:"text-[#1D2D5C] font-[400] z-0 text-[14px] flex gap-[3px]",children:[t.rating,e.jsx(ee,{count:5,size:15,value:t.rating,activeColor:"#ffd700",isHalf:!0,className:"mt-5",edit:!1})]})]}),e.jsx("div",{className:"col-span-2 flex items-center pr-[25px]",children:e.jsx("p",{className:"text-[#535D7A] text-[14px] font-[400] leading-[22px]",children:t.description})}),e.jsx("div",{className:"col-span-1 flex items-center pr-[25px]",children:e.jsx("p",{className:"text-[#535D7A] text-[14px] font-[400] leading-[22px]",children:t.downloads})}),e.jsx("div",{className:"col-span-1 flex items-center pr-[25px]",children:e.jsxs("p",{className:"text-[#2174F5] text-[14px] font-[500] leading-[22px]",children:["USD $",t.asking_price]})}),e.jsx("div",{className:"col-span-1 flex items-center pr-[25px]",children:e.jsx("p",{className:"text-[#2174F5] text-[14px] font-[500] leading-[22px]",children:t.name})}),e.jsx("div",{className:"col-span-1 flex items-center pr-[25px]",children:(()=>t.status===1?e.jsx("p",{className:"inline-flex rounded-full bg-success bg-opacity-10 py-1 px-3 text-sm font-medium text-success",children:"Approved"}):t.status===2?e.jsx("p",{className:"inline-flex rounded-full bg-warning bg-opacity-10 py-1 px-3 text-sm font-medium text-warning",children:"Pending"}):t.status===3?e.jsx("p",{className:"inline-flex rounded-full bg-danger bg-opacity-10 py-1 px-3 text-sm font-medium text-danger",children:"Rejected"}):e.jsx("p",{className:"inline-flex rounded-full bg-gray-500 bg-opacity-10 py-1 px-3 text-sm font-medium text-gray-500",children:"Unknown"}))()}),e.jsx("div",{className:"col-span-1 flex items-center leading-[18px]",children:e.jsx("button",{onClick:()=>H(t.id,t.seller_id),className:"inline-flex items-center justify-center rounded-md bg-[#2174F5] py-[8px] px-[20px] text-center font-[400] text-[#EFF4FB] text-[16px] hover:bg-opacity-90 leading-[23px]",children:"View"})}),e.jsxs("div",{className:"col-span-1 flex items-center",children:[t.status=="1"&&e.jsx("span",{className:"inline-flex items-center justify-center rounded-md text-[green] py-[5px] px-[20px] text-center font-[400] text-[#EFF4FB] text-[16px] leading-[23px]",children:"Approved"}),t.status=="2"&&e.jsxs("div",{className:"flex items-center gap-[6px]",children:[e.jsx("button",{onClick:()=>J(t.id,t.seller_id),className:"inline-flex items-center justify-center rounded-md bg-[#2174F5] py-[8px] px-[20px] text-center font-[400] text-[#EFF4FB] text-[16px] hover:bg-opacity-90 leading-[23px]",children:"Accept"}),e.jsx("button",{onClick:()=>Z(t.id),className:"inline-flex items-center justify-center rounded-md bg-[red] py-[8px] px-[20px] text-center font-[400] text-[#EFF4FB] text-[16px] hover:bg-opacity-90 leading-[23px]",children:"Reject"})]}),t.status=="3"&&e.jsx("span",{className:"inline-flex items-center justify-center rounded-md text-[green] py-[5px] px-[20px] text-center font-[400] text-[#EFF4FB] text-[16px] leading-[23px]",children:"Rejected"})]})]}))]}),E&&e.jsx("span",{className:"bg-[gray] text-center mt-[9px] max-w-[708px] w-full rounded-lg py-[15px]",children:E&&e.jsx("p",{children:E})}),c.length>0&&e.jsx("div",{className:"text-center py-[50px]",children:e.jsxs("ul",{className:"inline-flex flex-wrap gap-[18px] items-center",children:[e.jsx("li",{children:e.jsx("a",{className:"flex h-9 items-center justify-center pagination-button",href:"#",onClick:()=>L(x-1),children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"6",height:"11",viewBox:"0 0 6 11",fill:"none",children:e.jsx("path",{d:"M5.10746 0C4.88059 0 4.65373 0.0899782 4.47462 0.282791L0.259703 4.82031C-0.0865675 5.19308 -0.0865675 5.81008 0.259703 6.18285L4.47462 10.7204C4.82089 11.0932 5.39403 11.0932 5.7403 10.7204C6.08657 10.3477 6.08657 9.73065 5.7403 9.35788L2.15819 5.50158L5.7403 1.64533C6.08657 1.27256 6.08657 0.655561 5.7403 0.282791C5.57313 0.0899782 5.34627 0 5.10746 0Z",fill:"#535D7A"})})})}),Array.from({length:P},(t,a)=>a+1).map(t=>e.jsx("li",{children:e.jsx("a",{className:`flex items-center justify-center text-[#535D7A] text-[18px] border-2 rounded-[3px] py-[8px] px-[15px] font-medium hover:border-primary hover:bg-gray hover:text-primary dark:border-strokedark dark:hover:border-primary dark:hover:bg-graydark leading-[normal] ${t===x?"active":""}`,href:"#",onClick:()=>L(t),style:{borderColor:t===x?"blue":"#D9D9D9"},children:t})},t)),e.jsx("li",{children:e.jsx("a",{className:"flex h-9 items-center justify-center pagination-button",href:"#",onClick:()=>L(x+1),children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"6",height:"11",viewBox:"0 0 6 11",fill:"none",children:e.jsx("path",{d:"M0.892541 0C1.11941 0 1.34627 0.0899782 1.52538 0.282791L5.7403 4.82031C6.08657 5.19308 6.08657 5.81008 5.7403 6.18285L1.52538 10.7204C1.17911 11.0932 0.605973 11.0932 0.259703 10.7204C-0.0865669 10.3477 -0.0865669 9.73065 0.259703 9.35788L3.84181 5.50158L0.259703 1.64533C-0.0865669 1.27256 -0.0865669 0.655561 0.259703 0.282791C0.426867 0.0899782 0.653734 0 0.892541 0Z",fill:"#535D7A"})})})})]})})]})},pe=()=>e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex items-center justify-between mb-[10px]",children:e.jsx(te,{pageName:"All Listings"})}),e.jsx(le,{})]});export{pe as default};
