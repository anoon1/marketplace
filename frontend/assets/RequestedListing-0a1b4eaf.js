import{r as n,j as e,d as D,u as U}from"./index-b349b8ac.js";import{B as T}from"./Breadcrumb-9b91b131.js";const q=D.baseApiUrl,z=({onClose:r,data:h})=>{const[o,E]=n.useState({}),[l,g]=n.useState({reason:"",bidId:h}),f=localStorage.getItem("usertoken"),[i,j]=n.useState(null),b=s=>{const{name:c,value:B}=s.target;g(y=>({...y,[c]:B}))},p=async s=>{if(s.preventDefault(),m())try{(await fetch(`${q}updateBidStatus`,{method:"post",headers:{"Content-type":"application/json"},body:JSON.stringify({...l,token:f,status:"3"})})).ok&&j("Bid request rejected sucessfully")}catch(c){console.log("error while sending report ",c)}},m=()=>{const s={};return l.reason||(s.reason="â€¢ Reason is required"),E(s),Object.keys(s).length===0};return e.jsx("div",{className:"fixed z-[1] inset-0 flex items-center justify-center bg-black bg-opacity-50 overflow-auto",children:e.jsx("div",{className:"max-w-[80%] max-h-[80%] bg-opacity-50 p-8 rounded-md",children:e.jsxs("form",{onSubmit:p,className:"relative flex flex-col gap-4 p-10 rounded-md bg-white ",id:"createListing",children:[e.jsx("div",{className:"absolute top-7 right-7 text-right",children:e.jsx("button",{onClick:r,className:"relative top-0 right-0 cursor-pointer text-gray-500 hover:text-black",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",className:"h-6 w-6",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})}),e.jsxs("div",{className:"rounded-sm bg-white dark:border-strokedark dark:bg-boxdark",children:[e.jsx("div",{className:"border-b border-stroke py-4 px-6.5 dark:border-strokedark",children:e.jsx("h2",{className:"font-medium text-black dark:text-white",children:"Rejection Reason"})}),e.jsx("div",{className:"flex flex-col gap-5.5 p-6.5",children:e.jsx("div",{className:"flex",children:e.jsxs("div",{className:"w-full max-w-[100%]",children:[e.jsx("label",{className:"mb-3 block text-black dark:text-white",children:"Rejection Reason"}),e.jsx("textarea",{name:"reason",value:l.reason,onChange:b,placeholder:"Enter the title",className:"w-full w-[auto] resize-none p-4 border-2 border p2 border-gray-300 rounded-md bg-gray-100 text-gray-800 focus:outline-none focus:border-primary transition duration-300 ease-in-out dark:bg-gray-700 dark:border-gray-600 dark:text-white"})]})})})]}),e.jsx("button",{type:"submit",onClick:p,className:"bg-[#2174F5] py-2 px-5 text-white rounded-md hover:bg-opacity-90",children:"Submit"}),e.jsx("span",{className:"text-[red] text-[16px]",children:o.reason&&e.jsx("p",{children:o.reason})}),i&&e.jsx("span",{className:"bg-[green] text-center mt-[9px] max-w-[1000px] w-full rounded-lg text-white py-[15px]",children:i&&e.jsx("p",{children:i})})]})})})},J=({onClose:r})=>e.jsx("div",{className:"fixed top-0 left-0 right-0 bottom-0 flex items-center justify-center bg-black bg-opacity-50 z-50",children:e.jsxs("div",{className:"text-[#FFF] w-full max-w-[536px] bg-[#fff] px-[55px] py-[38px] relative",children:[e.jsx("button",{className:"absolute top-4 color-[#94a3b8] right-4 cursor-pointer text-[#94a3b8] hover:text-gray-700",onClick:r,children:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),e.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})}),e.jsx("div",{className:"text-center mb-[24px]",children:e.jsx("img",{src:"/assets/accepted-img.svg",alt:"",className:"m-auto"})}),e.jsxs("h2",{className:"text-center text-[#1C2434] text-[26px] font-[600] leading-[normal]",children:["Bid has been ",e.jsx("br",{})," successfully Accepted"]})]})}),x=D.baseApiUrl,G=10,Z=()=>{const[r,h]=n.useState(1);U();const[o,E]=n.useState(G),[l,g]=n.useState(1),[f,i]=n.useState(!1),[j,b]=n.useState(null),[p,m]=n.useState(!1),[s,c]=n.useState(""),[B,y]=n.useState(null),[W,_]=n.useState(!1),[$,A]=n.useState([]),[N,v]=n.useState(null),u=localStorage.getItem("usertoken"),w=async()=>{try{const a=await(await fetch(`${x}getSellerBid`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:u,getStatus:s,page:r,pageSize:o})})).json();if(a.data.data.length===0)A([]),v("No Bid Found");else{const d=a.data.data.map(C=>{const F=new Date(C.created_at),S=new Intl.DateTimeFormat("en-GB",{day:"numeric",month:"short",year:"numeric"}),O=new Intl.DateTimeFormat("en-US",{hour:"numeric",minute:"numeric",hour12:!0});return v(""),{...C,formattedCreatedAt:`${S.format(F)} ${O.format(F)}`}});A(d),g(a.data.totalPages)}}catch(t){console.error("Error:",t)}};n.useEffect(()=>{w()},[u,s,r,o]);const L=async t=>{try{(await fetch(`${x}updateBidStatus`,{method:"post",headers:{"Content-type":"application/json"},body:JSON.stringify({bidId:t,token:u,status:"1"})})).ok?i(!0):v("No Data Found")}catch(a){console.log("error while sending report ",a)}},R=async t=>{try{const a=await fetch(`${x}acceptpayment`,{method:"post",headers:{"Content-type":"application/json"},body:JSON.stringify({bidId:t,token:u})}).then(d=>d.text()).then(d=>{let S=JSON.parse(d).link.seller_link;window.open(S,"","width=1000, height=850")})}catch(a){console.log("error while sending report ",a)}},P=t=>{b(t),m(!0)},I=()=>{i(!1),w()},M=t=>{t.preventDefault(),m(!1),_(!0),y(null),w()},k=t=>{t>=1&&t<=l&&h(t)};return e.jsxs("div",{className:"bg-white overflow-auto",children:[p&&e.jsx(z,{onClose:M,data:j}),f&&e.jsx(J,{onClose:I}),e.jsxs("div",{className:"bg-white border-b border-[#E0E0E0] pt-[30px] md:min-w-auto min-w-[900px]",children:[e.jsxs("div",{className:"text-end pb-4 pr-4",children:[e.jsx("label",{htmlFor:"bidStatus",className:"text-gray-700",children:"Bids Status : "}),e.jsxs("select",{onChange:t=>c(t.target.value),id:"bidStatus",className:"appearance-none w-50 bg-white border border-gray-300 rounded-md py-2 px-3 leading-tight focus:outline-none focus:shadow-outline-blue focus:border-blue-300",children:[e.jsx("option",{value:"",children:"All"}),e.jsx("option",{value:"1",selected:s==="1",children:"Approved"}),e.jsx("option",{value:"2",selected:s==="2",children:"Pending"}),e.jsx("option",{value:"3",selected:s==="3",children:"Rejected"})]})]}),e.jsxs("div",{className:"grid grid-cols-10 pt-[18px] pb-[15px] px-[48px] border-t border-[#E0E0E0]",children:[e.jsx("div",{className:"col-span-1 flex items-center leading-[18px]",children:e.jsx("p",{className:"text-[#1D2D5C] text-[16px] font-[500] leading-[18px]",children:"Image"})}),e.jsx("div",{className:"col-span-1 flex items-center leading-[18px]",children:e.jsx("p",{className:"text-[#1D2D5C] text-[16px] font-[500] leading-[18px]",children:"Title"})}),e.jsx("div",{className:"col-span-1 items-center flex leading-[18px]",children:e.jsx("p",{className:"text-[#1D2D5C] text-[16px] font-[500] leading-[18px]",children:"Bid Price"})}),e.jsx("div",{className:"col-span-1.5 flex items-center leading-[18px]",children:e.jsx("p",{className:"text-[#1D2D5C] text-[16px] font-[500] leading-[18px]",children:"Bid By"})}),e.jsx("div",{className:"col-span-2 flex items-center leading-[18px]",children:e.jsx("p",{className:"text-[#1D2D5C] text-[16px] font-[500] leading-[18px]",children:"Bid Posted At"})}),e.jsx("div",{className:"col-span-1 flex items-center leading-[18px]",children:e.jsx("p",{className:"text-[#1D2D5C] text-[16px] font-[500] leading-[18px]",children:"Status"})}),e.jsx("div",{className:"col-span-1 flex items-center leading-[18px]",children:e.jsx("p",{className:"text-[#1D2D5C] text-[16px] font-[500] leading-[18px]",children:"Payment Status"})}),e.jsx("div",{className:"col-span-1 flex items-center leading-[18px]",children:e.jsx("p",{className:"text-[#1D2D5C] text-[16px] font-[500] leading-[18px]",children:"Action"})})]}),$.map(t=>e.jsxs("div",{className:"grid grid-cols-10 border-t border-[#E0E0E0] pt-[30px]  pb-[30px] px-[48px]",children:[e.jsx("div",{className:"col-span-1 flex items-center pr-[25px]",children:e.jsx("div",{className:"flex gap-4 sm:flex-row sm:items-center",children:e.jsx("div",{className:"flex-shrink-0",children:t.listing_thumbnail?e.jsx("img",{src:`${x}${t.listing_thumbnail}`,alt:"Brand",className:"h-[60px]"}):e.jsx("img",{src:`${x}${D.DEFAULT_IMG}`,alt:"Default",className:"h-[60px] w-[60px]"})})})}),e.jsx("div",{className:"col-span-1 items-center flex gap-[10px] pr-[25px]",children:e.jsx("p",{className:"text-[#1D2D5C] text-[16px] font-[600] leading-[126%]",children:t.title})}),e.jsx("div",{className:"col-span-1 flex items-center pr-[25px]",children:e.jsxs("p",{className:"text-[#2174F5] text-[14px] font-[400] leading-[22px]",children:["USD $",t.selling_price]})}),e.jsx("div",{className:"col-span-1.5 flex items-center pr-[25px]",children:e.jsx("p",{className:"rounded-[5px] bg-[#EDF2F9] px-[20px] py-[14px]  text-[#535D7A] text-[14px] font-[400] leading-[18px]",children:t.name})}),e.jsx("div",{className:"col-span-2 flex items-center pr-[25px]",children:e.jsx("p",{className:"text-[#FF5771] text-[14px] font-[400] leading-[22px]",children:t.formattedCreatedAt})}),e.jsx("div",{className:"col-span-1 flex items-center pr-[25px]",children:(()=>t.bid_status===1?e.jsx("p",{className:"inline-flex rounded-full bg-success bg-opacity-10 py-1 px-3 text-sm font-medium text-success",children:"Approved"}):t.bid_status===2?e.jsx("p",{className:"inline-flex rounded-full bg-warning bg-opacity-10 py-1 px-3 text-sm font-medium text-warning",children:"Pending"}):t.bid_status===3?e.jsx("p",{className:"inline-flex rounded-full bg-danger bg-opacity-10 py-1 px-3 text-sm font-medium text-danger",children:"Rejected"}):e.jsx("p",{className:"inline-flex rounded-full bg-gray-500 bg-opacity-10 py-1 px-3 text-sm font-medium text-gray-500",children:"Unknown"}))()}),e.jsx("div",{className:"col-span-1 flex items-center",children:(()=>t.paymentStatus==="Refunded"?e.jsx("p",{className:"inline-flex rounded-full bg-success bg-opacity-10 py-1 px-3 text-sm font-medium text-success",children:"Refunded"}):t.paymentStatus==="Processing"?e.jsx("p",{className:"inline-flex rounded-full bg-warning bg-opacity-10 py-1 px-3 text-sm font-medium text-warning",children:"Processing"}):t.paymentStatus==="Succeed"?e.jsx("p",{className:"inline-flex rounded-full bg-success bg-opacity-10 py-1 px-3 text-sm font-medium text-success",children:"Payment Succeed"}):t.paymentStatus==="Pending"?e.jsx("p",{className:"inline-flex rounded-full bg-warning bg-opacity-10 py-1 px-3 text-sm font-medium text-warning",children:"Pending"}):e.jsx("p",{className:"inline-flex rounded-full bg-gray-500 bg-opacity-10 py-1 px-3 text-sm font-medium text-gray-500",children:"N/A"}))()}),e.jsx("div",{className:"col-span-2 flex items-center",children:e.jsxs("div",{className:"flex items-center gap-[6px]",children:[s==="2"&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>L(t.id),className:"inline-flex items-center justify-center rounded-md bg-[#2174F5] py-[5px] px-[20px] text-center font-[400] text-[#EFF4FB] text-[16px] hover:bg-opacity-90 leading-[23px]",children:"Approve"}),e.jsx("button",{onClick:()=>P(t.id),className:"inline-flex items-center justify-center rounded-md bg-[red] py-[5px] px-[20px] text-center font-[400] text-[#EFF4FB] text-[16px] hover:bg-opacity-90 leading-[23px]",children:"Reject"})]}),s==="1"&&e.jsx("button",{onClick:()=>R(t.id),className:"inline-flex items-center justify-center rounded-md bg-meta-3 py-[5px] px-[20px] text-center font-[400] text-[#EFF4FB] text-[16px] hover:bg-opacity-90 leading-[23px]",type:"button",children:"Request Payment"}),s==="3"&&e.jsx("span",{className:"inline-flex items-center justify-center rounded-md text-[red] py-[5px] px-[20px] text-center font-[400] text-[#EFF4FB] text-[16px] leading-[23px]",children:"N/A"}),s==""&&e.jsxs(e.Fragment,{children:[t.bid_status===2&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>L(t.id),className:"inline-flex items-center justify-center rounded-md bg-[#2174F5] py-[5px] px-[20px] text-center font-[400] text-[#EFF4FB] text-[16px] hover:bg-opacity-90 leading-[23px]",children:"Approve"}),e.jsx("button",{onClick:()=>P(t.id),className:"inline-flex items-center justify-center rounded-md bg-[red] py-[5px] px-[20px] text-center font-[400] text-[#EFF4FB] text-[16px] hover:bg-opacity-90 leading-[23px]",children:"Reject"})]}),t.bid_status===1&&e.jsx("button",{onClick:()=>R(t.id),className:"inline-flex items-center justify-center rounded-md bg-meta-3 py-[5px] px-[20px] text-center font-[400] text-[#EFF4FB] text-[16px] hover:bg-opacity-90 leading-[23px]",type:"button",children:"Request  Payment"}),t.bid_status===3&&e.jsx("span",{className:"inline-flex items-center justify-center rounded-md text-[red] py-[5px] px-[20px] text-center font-[400] text-[#EFF4FB] text-[16px] leading-[23px]",children:"N/A"})]})]})})]}))]}),N&&e.jsx("span",{className:"bg-[gray] text-center mt-[9px] max-w-[708px] w-full rounded-lg py-[15px]",children:N&&e.jsx("p",{children:N})}),e.jsx("div",{className:"text-center py-[50px]",children:e.jsxs("ul",{className:"inline-flex flex-wrap gap-[18px] items-center justify-center",children:[e.jsx("li",{children:e.jsx("a",{className:"flex h-9 items-center justify-center pagination-button",href:"#",onClick:()=>k(r-1),children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"6",height:"11",viewBox:"0 0 6 11",fill:"none",children:e.jsx("path",{d:"M5.10746 0C4.88059 0 4.65373 0.0899782 4.47462 0.282791L0.259703 4.82031C-0.0865675 5.19308 -0.0865675 5.81008 0.259703 6.18285L4.47462 10.7204C4.82089 11.0932 5.39403 11.0932 5.7403 10.7204C6.08657 10.3477 6.08657 9.73065 5.7403 9.35788L2.15819 5.50158L5.7403 1.64533C6.08657 1.27256 6.08657 0.655561 5.7403 0.282791C5.57313 0.0899782 5.34627 0 5.10746 0Z",fill:"#535D7A"})})})}),Array.from({length:l},(t,a)=>a+1).map(t=>e.jsx("li",{children:e.jsx("a",{className:`flex items-center justify-center text-[#535D7A] text-[18px] border-2 rounded-[3px] py-[8px] px-[15px] font-medium hover:border-primary hover:bg-gray hover:text-primary dark:border-strokedark dark:hover:border-primary dark:hover:bg-graydark leading-[normal] ${t===r?"active":""}`,href:"#",onClick:()=>k(t),style:{borderColor:t===r?"blue":"#D9D9D9"},children:t})},t)),e.jsx("li",{children:e.jsx("a",{className:"flex h-9 items-center justify-center pagination-button",href:"#",onClick:()=>k(r+1),children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"6",height:"11",viewBox:"0 0 6 11",fill:"none",children:e.jsx("path",{d:"M0.892541 0C1.11941 0 1.34627 0.0899782 1.52538 0.282791L5.7403 4.82031C6.08657 5.19308 6.08657 5.81008 5.7403 6.18285L1.52538 10.7204C1.17911 11.0932 0.605973 11.0932 0.259703 10.7204C-0.0865669 10.3477 -0.0865669 9.73065 0.259703 9.35788L3.84181 5.50158L0.259703 1.64533C-0.0865669 1.27256 -0.0865669 0.655561 0.259703 0.282791C0.426867 0.0899782 0.653734 0 0.892541 0Z",fill:"#535D7A"})})})})]})})]})},Q=()=>e.jsx(e.Fragment,{children:e.jsxs("div",{className:"md:pl-[72px] pl-[0] md:pr-[48px] pr-[0]",children:[e.jsx(T,{pageName:"Listing Bids"}),e.jsx(Z,{})]})});export{Q as default};
